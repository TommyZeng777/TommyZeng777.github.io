---
title: Git版本管理软件使用心得
date: 2022-04-26 02:46:57
permalink: /pages/9b3f4f/
sidebar: auto
categories:
  - 09-静态博客知识分享
tags:
  - 
author: 
  name: TommyZeng
  link: https://github.com/tommyzeng777
---


## 前言
2022.04.02更新
相信新手最抓狂的问题估计就是怎么在GitHub仓库中建新文件以及删除旧的文件，这篇文章就来一探究竟。看之前可以好好看看这张图, 结合文章内容就可以更好的理解git的机制了
<!-- more -->
### 难度: 一星

![](https://gcore.jsdelivr.net/gh/TommyZeng777/picgo/img/202203250522426.png)
### 小介绍
这是一个想混迹Github不可缺少的重要工具，是Github仓库的版本控制工具。不过相信大多数人和我一样，最早接触时估计都给整的够呛，今天就专门介绍些简单的操作，方便大家初上手。

::: warning 注意
想执行以下所有内容, 必须先把Git配置好, 所有操作都是基于Git的

可能有些小伙伴新入坑还没搞懂，这里再次提醒一下
GitHub是开源代码托管(存放、管理)平台
Git是进行开源软件的版本管理的(用人话说就是专用的文件上传下载工具)

安装教程我贴在这里, 有需要的小伙伴自取
[Git - Downloading Package (git-scm.com)](https://git-scm.com/download/win)
[Windows系统Git安装教程（详解Git安装过程） - 学为所用 - 博客园 (cnblogs.com)](https://www.cnblogs.com/xueweisuoyong/p/11914045.html)
:::

以下操作将重点介绍两个最常见的用途:

- 情景一: 把网上已经建立且运营中的仓库克隆(下载)至本地
- 情景二: 本地自己创建的项目, 想把文件共享出来供别人学(bai)习(piao),所以需要把本地文件上传上去

## 克隆Github上的仓库内容并进行基础文件操作

先讲讲克隆的效果, 执行完git的命令后, 会下载仓库内容至本地，并存放在一个与仓库同名的文件夹内, 并可进行更多操作
::: tip 
如果仓库叫TommyZeng/picgo, 文件夹名字就会叫picgo
> 建议找一个文件比较多的仓库fork(转存)到自己的GitHub中, 来练习基础的增删查改
:::

### 1. 首先是执行克隆指令
::: danger
注意仓库链接在这里
:::
<img src="https://gcore.jsdelivr.net/gh/TommyZeng777/picgo/img/202204020845002.png" style="zoom: 50%;"/>

```bash
git clone + "仓库链接"
```

<br>

### 2. 执行初始化指令, 生成与仓库的通讯链接
::: warning
这个步骤在已经建好GitHub仓库的情况下并没有必要, 是在GitHub上没有建仓时让用户可直接在本地建仓的一种办法
:::
```bash
git init  #仓库初始化

```
会生成一个.git的隐藏文件，内部有包含与仓库通讯的文件, 要填写相关user信息, 可使用代码
```bash
git config --global user.name "xxx" #就是仓库名称斜杠前的id   配置用户名
git config --global user.email "xxx@xxx.com"              # 配置邮件
```




### 3. 增删查改的方法
通常完成上一步后, 就会下载到相当多的文件夹

删除文件的方法：

>大多数文档里的方法是用下面这个代码一个个删除，说实话动的文件多了NM就离谱

```bash
git rm "文件名"	        #删除文件
git rm -r "文件夹名字"  #删除文件夹
```
<br>

#### 批量删除/新建文件后同步至仓库

我们主要讲怎么批量删除/新建文件

:::danger 步骤
第一步: 直接资源管理器(我的电脑)里删掉想要删除的文件, 或直接新建想要的文件
然后在git bash里输入`git add .`(注意.与add之间空一格)把改动添加到缓存
然后用`git commit -m "clear"`一次性全部删除
>"引号里不一定要写clear, 任意字母都可以,但切记不能空着"
:::
这是不是就不用一个个文件commit确认，特省事情
<br>

### 推送上传至仓库
::: tip
文件修改完后,用`git push`即可推送本地仓库至远程仓库即可
:::

::: warning
网上有说第一次推送仓库的时候好像得用这行代码的, 2022/04/02测试了几个仓库,都不用执行这步,可忽略
```
git push -u origin main #第一次推送main分支时使用-u指令
git push origin main
```
:::

<br>

![](https://gcore.jsdelivr.net/gh/TommyZeng777/picgo/img/202203250522426.png)

**做到这一步会不会对这个图理解更深了?**

workspace: 本地工作区
staging area: 缓存区/暂存区
local repository: 本地仓库
remote repository: 远程仓库

用一张图来表达就是
```mermaid 
graph LR
A(本地工作区增删文件) -->|git add .| B(暂存区)
B -->|git commit -m xx| C((本地仓库))
C -->|push|D((远程仓库))

```

### 4.下载仓库内容至本地

:::danger
下载仓库内容到本地使用代码
```bash
git pull origin main # 获取远程分支main并合并到当前分支
```
>注意一定时main分支, GitHub在2020年把主分支从默认的main改成了main
:::
完成后即可按上面的增删步骤管理仓库内容

## 避坑

网上很多帖子会查出各种命令如
```bash
git add -A . #这个实测没啥用" ."就可以了

递归删除法(删除全部文件)
git rm xxx                                                # 删除index中的文件
git rm -r *   # 递归删除文件(可全删)      

git commit -m 'add more files'一次提交所有文件

git status 	#告知你文件情况
git commit -m 'first commit'
```
这些命令基本都能用, 不过有些杂乱,且让人晕头转向, 不用太在意这些




## 常用Git代码
这些是常用的Git操控代码,转载至[南無假行僧的Gist](https://gist.github.com/guweigang/9848271)
>merge在这是合并的意思
```bash
git init                                                  # 初始化本地git仓库（创建新仓库）
git config --global user.name "xxx"                       # 配置用户名
git config --global user.email "xxx@xxx.com"              # 配置邮件
git config --global color.ui true                         # git status等命令自动着色
git config --global color.status auto
git config --global color.diff auto
git config --global color.branch auto
git config --global color.interactive auto
git config --global --unset http.proxy                    # remove  proxy configuration on git
git clone git+ssh://git@192.168.53.168/VT.git             # clone远程仓库
git status                                                # 查看当前版本状态（是否修改）
git add xyz                                               # 添加xyz文件至index
git add .                                                 # 增加当前子目录下所有更改过的文件至index
git commit -m 'xxx'                                       # 提交
git commit --amend -m 'xxx'                               # 合并上一次提交（用于反复修改）
git commit -am 'xxx'                                      # 将add和commit合为一步
git rm xxx                                                # 删除index中的文件
git rm -r *                                               # 递归删除
git log                                                   # 显示提交日志
git log -1                                                # 显示1行日志 -n为n行
git log -5
git log --stat                                            # 显示提交日志及相关变动文件
git log -p -m
git show dfb02e6e4f2f7b573337763e5c0013802e392818         # 显示某个提交的详细内容
git show dfb02                                            # 可只用commitid的前几位
git show HEAD                                             # 显示HEAD提交日志
git show HEAD^                                            # 显示HEAD的父（上一个版本）的提交日志 ^^为上两个版本 ^5为上5个版本
git tag                                                   # 显示已存在的tag
git tag -a v2.0 -m 'xxx'                                  # 增加v2.0的tag
git show v2.0                                             # 显示v2.0的日志及详细内容
git log v2.0                                              # 显示v2.0的日志
git diff                                                  # 显示所有未添加至index的变更
git diff --cached                                         # 显示所有已添加index但还未commit的变更
git diff HEAD^                                            # 比较与上一个版本的差异
git diff HEAD -- ./lib                                    # 比较与HEAD版本lib目录的差异
git diff origin/main..main                            # 比较远程分支main上有本地分支main上没有的
git diff origin/main..main --stat                     # 只显示差异的文件，不显示具体内容
git remote add origin git+ssh://git@192.168.53.168/VT.git # 增加远程定义（用于push/pull/fetch）
git branch                                                # 显示本地分支
git branch --contains 50089                               # 显示包含提交50089的分支
git branch -a                                             # 显示所有分支
git branch -r                                             # 显示所有原创分支
git branch --merged                                       # 显示所有已合并到当前分支的分支
git branch --no-merged                                    # 显示所有未合并到当前分支的分支
git branch -m main main_copy                          # 本地分支改名
git checkout -b main_copy                               # 从当前分支创建新分支main_copy并检出
git checkout -b main main_copy                        # 上面的完整版
git checkout features/performance                         # 检出已存在的features/performance分支
git checkout --track hotfixes/BJVEP933                    # 检出远程分支hotfixes/BJVEP933并创建本地跟踪分支
git checkout v2.0                                         # 检出版本v2.0
git checkout -b devel origin/develop                      # 从远程分支develop创建新本地分支devel并检出
git checkout -- README                                    # 检出head版本的README文件（可用于修改错误回退）
git merge origin/main                                   # 合并远程main分支至当前分支
git cherry-pick ff44785404a8e                             # 合并提交ff44785404a8e的修改
git push origin main                                    # 将当前分支push到远程main分支
git push origin :hotfixes/BJVEP933                        # 删除远程仓库的hotfixes/BJVEP933分支
git push --tags                                           # 把所有tag推送到远程仓库
git fetch                                                 # 获取所有远程分支（不更新本地分支，另需merge）
git fetch --prune                                         # 获取所有原创分支并清除服务器上已删掉的分支
git pull origin main                                    # 获取远程分支main并merge到当前分支
git mv README README2                                     # 重命名文件README为README2
git reset --hard HEAD                                     # 将当前版本重置为HEAD（通常用于merge失败回退）
git rebase
git branch -d hotfixes/BJVEP933                           # 删除分支hotfixes/BJVEP933（本分支修改已合并到其他分支）
git branch -D hotfixes/BJVEP933                           # 强制删除分支hotfixes/BJVEP933
git ls-files                                              # 列出git index包含的文件
git show-branch                                           # 图示当前分支历史
git show-branch --all                                     # 图示所有分支历史
git whatchanged                                           # 显示提交历史对应的文件修改
git revert dfb02e6e4f2f7b573337763e5c0013802e392818       # 撤销提交dfb02e6e4f2f7b573337763e5c0013802e392818
git ls-tree HEAD                                          # 内部命令：显示某个git对象
git rev-parse v2.0                                        # 内部命令：显示某个ref对于的SHA1 HASH
git reflog                                                # 显示所有提交，包括孤立节点
git show HEAD@{5}
git show main@{yesterday}                               # 显示main分支昨天的状态
git log --pretty=format:'%h %s' --graph                   # 图示提交日志
git show HEAD~3
git show -s --pretty=raw 2be7fcb476
git stash                                                 # 暂存当前修改，将所有至为HEAD状态
git stash list                                            # 查看所有暂存
git stash show -p stash@{0}                               # 参考第一次暂存
git stash apply stash@{0}                                 # 应用第一次暂存
git grep "delete from"                                    # 文件中搜索文本“delete from”
git grep -e '#define' --and -e SORT_DIRENT
git gc
git fsck
```



<!--
## 本地上传云仓库
```
#以下情况是github建立一个空仓库,可以直接把本地同步上去
git remote add origin #github仓库的ssh链接
```-->
